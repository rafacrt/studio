
/* Use system font stack */
body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
  background-color: var(--bs-body-bg); /* Ensure body background uses Bootstrap variable */
  color: var(--bs-body-color); /* Ensure body text color uses Bootstrap variable */
}

/* Define HSL variables for the new theme */
:root {
  --background: 0 0% 100%; /* Light background */
  --foreground: 222.2 84% 4.9%; /* Dark text */

  --card: 0 0% 100%;
  --card-foreground: 222.2 84% 4.9%;

  --popover: 0 0% 100%;
  --popover-foreground: 222.2 84% 4.9%;

  --primary: 30 100% 55%; /* Orange */
  --primary-foreground: 0 0% 100%; /* White text on orange */

  --secondary: 210 100% 50%; /* Blue */
  --secondary-foreground: 0 0% 100%; /* White text on blue */

  --muted: 210 40% 96.1%;
  --muted-foreground: 215.4 16.3% 46.9%;

  --accent: 30 100% 55%; /* Orange for accent */
  --accent-foreground: 0 0% 100%; /* White text on orange accent */

  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 0 0% 98%;

  --border: 214.3 31.8% 91.4%;
  --input: 214.3 31.8% 91.4%;
  --ring: 30 100% 55%; /* Orange for focus rings */

  --radius: 0.5rem;

  /* Bootstrap variable overrides using our HSL theme */
  --bs-primary-hsl: var(--primary);
  --bs-secondary-hsl: var(--secondary);
  /* For text, Bootstrap uses -rgb vars for opacity control, convert HSL to RGB if needed or use direct color */
  --bs-primary: hsl(var(--primary));
  --bs-primary-rgb: 45,100%,55%; /* Orange as RGB - Note: This needs to be the actual R,G,B values, not H,S,L */
  /* For orange hsl(30, 100%, 55%) -> approx rgb(255, 145, 25) */
  --bs-primary-rgb-values: 255, 145, 25;
  /* For blue hsl(210, 100%, 50%) -> approx rgb(0, 123, 255) */
  --bs-secondary-rgb-values: 0, 123, 255;


  --bs-body-color: hsl(var(--foreground));
  --bs-body-bg: hsl(var(--background));
  --bs-link-color: hsl(var(--primary));
  --bs-link-hover-color: hsl(var(--primary) / 0.8); /* Slightly darker orange on hover */
}

[data-bs-theme="dark"] {
  --background: 222.2 84% 4.9%; /* Dark background */
  --foreground: 0 0% 98%; /* Light text */

  --card: 222.2 84% 4.9%;
  --card-foreground: 0 0% 98%;

  --popover: 222.2 84% 4.9%;
  --popover-foreground: 0 0% 98%;

  --primary: 30 100% 55%; /* Orange - can adjust for dark mode if needed, e.g., slightly less saturated */
  --primary-foreground: 0 0% 100%; /* White text on orange */

  --secondary: 210 100% 60%; /* Lighter Blue for dark mode */
  --secondary-foreground: 0 0% 100%;

  --muted: 217.2 32.6% 17.5%;
  --muted-foreground: 215 20.2% 65.1%;

  --accent: 30 100% 55%; /* Orange for accent */
  --accent-foreground: 0 0% 100%;

  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 0 0% 98%;

  --border: 217.2 32.6% 17.5%;
  --input: 217.2 32.6% 17.5%;
  --ring: 30 100% 55%; /* Orange for focus rings */

  /* Bootstrap variable overrides for dark mode */
  --bs-primary: hsl(var(--primary));
  /* For orange hsl(30, 100%, 55%) -> approx rgb(255, 145, 25) */
  --bs-primary-rgb-values: 255, 145, 25;
  /* For blue hsl(210, 100%, 60%) -> approx rgb(51, 149, 255) */
  --bs-secondary-rgb-values: 51, 149, 255;


  --bs-body-color: hsl(var(--foreground));
  --bs-body-bg: hsl(var(--background));
  --bs-link-color: hsl(var(--primary));
  --bs-link-hover-color: hsl(var(--primary) / 0.8);
}


/* Basic hover lift effect for OSCard */
.hover-lift .card {
  transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
}
.hover-lift:hover .card {
  transform: translateY(-4px);
  box-shadow: 0 0.4rem 0.8rem rgba(0, 0, 0, 0.12) !important;
}

/* General Smooth Transitions */
.transition-all {
    transition: all 0.3s ease-in-out;
}
.transition-opacity {
    transition: opacity 0.3s ease-in-out;
}
.transition-transform {
    transition: transform 0.3s ease-in-out;
}
.transition-colors {
     transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out, color 0.2s ease-in-out;
}


/* Card Grid Animations (Fade in/out on filter change) */
.os-grid-container {
    /* Container to manage transitions */
}

.os-grid-item {
    transition: opacity 0.4s ease-in-out, transform 0.3s ease-in-out;
    /* Start slightly scaled down and transparent */
    opacity: 0;
    transform: scale(0.98);
    animation: fadeInScale 0.4s ease-out forwards; /* Apply animation on load/filter */
}

@keyframes fadeInScale {
  from {
    opacity: 0;
    transform: scale(0.98);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}


/* Ensure DayPicker takes full height available in its container */
.rdp {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
}

.rdp-table {
  flex-grow: 1; /* Allow table to grow */
  border-collapse: collapse; /* Ensure borders combine correctly */
  table-layout: fixed; /* Ensure columns have equal width */
}

/* Utility class for fixed table layout */
.table-fixed {
    table-layout: fixed;
}


.rdp-tbody {
    height: 100%; /* Allow body to take height */
}

.rdp-row {
    /* Let height be determined by content and flexbox */
}

.rdp-cell {
  height: 100%; /* Ensure cell takes full row height */
  vertical-align: top;
}

.rdp-day {
  height: 100%; /* Make day link fill the cell */
  display: flex; /* Use flex for content alignment */
  align-items: flex-start; /* Align content to top */
  justify-content: flex-start; /* Align content to left */
  padding: 0 !important; /* Remove default padding */
  border-radius: 0 !important; /* Remove default rounding */
  border: none !important; /* Remove default border */
  text-decoration: none !important; /* Remove underline from day number */
  color: inherit !important; /* Inherit text color */
  background-color: transparent !important; /* No background unless specified */
  transition: background-color 0.2s ease-in-out; /* Add transition to day */
}

.rdp-day:focus {
    outline: 2px solid var(--bs-primary); /* Add focus outline */
    z-index: 1;
}

.rdp-day_outside .day-content {
  opacity: 0.5;
}

/* Urgent OS Details Styling */
/* Remove global background from .os-details-urgent container */
.os-details-urgent .card {
  border-color: var(--bs-danger, #dc3545) !important;
  background-color: var(--bs-danger-bg-subtle, #f8d7da); /* Apply subtle red bg to the card itself */
}

.os-details-urgent .card-header {
  background-color: var(--bs-danger-bg-subtle, #f8d7da) !important; /* Ensure header matches or is slightly different */
  border-bottom-color: var(--bs-danger-border-subtle, #f5c2c7) !important;
  color: var(--bs-danger-text-emphasis, #842029) !important;
}
.os-details-urgent .card-header .card-title,
.os-details-urgent .card-header .card-subtitle {
  color: var(--bs-danger-text-emphasis, #842029) !important;
}

.os-details-urgent .card-body {
   /* Card body will inherit background from .card or can be styled explicitly if needed */
   /* background-color: var(--bs-danger-bg-subtle, #f8d7da); */ /* Already on .card */
}

.os-details-urgent .text-primary { /* Override typical primary colors to danger emphasis */
  color: var(--bs-danger-text-emphasis, #842029) !important;
}
.os-details-urgent .text-muted {
  color: var(--bs-danger-text-emphasis, #721c24) !important; /* Darker red for muted text */
  opacity: 0.85;
}
.os-details-urgent .form-control,
.os-details-urgent .form-select {
    border-color: var(--bs-danger, #dc3545);
    background-color: var(--bs-white); /* Keep form fields somewhat standard for readability */
}
.os-details-urgent .form-control:focus,
.os-details-urgent .form-select:focus {
    border-color: var(--bs-danger, #dc3545);
    box-shadow: 0 0 0 0.25rem rgba(220, 53, 69, 0.25);
}

/* Print Styles */
@media print {
  body, .container, .container-fluid {
    margin: 0 !important;
    padding: 0 !important;
    background-color: #fff !important; /* Ensure white background for printing */
    color: #000 !important; /* Ensure black text */
    -webkit-print-color-adjust: exact !important; /* Chrome, Safari */
    color-adjust: exact !important; /* Firefox, Edge */

  }

  .page-transition-container > footer,
  .page-transition-container > header,
  .btn, /* Hide all buttons */
  .os-grid-container, /* Hide dashboard grid */
  .dashboard-controls-container, /* Hide dashboard controls */
  .navbar, /* Hide header */
  .footer-content-container, /* Hide footer */
  .no-print { /* Utility class to hide specific elements */
    display: none !important;
  }

  .os-details-print-container {
      padding: 0 !important;
      margin: 0 !important;
  }

  .os-details-print-container .card {
    box-shadow: none !important;
    border: 1px solid #ccc !important;
    width: 100% !important;
    max-width: 100% !important;
    margin: 0 auto !important;
    page-break-inside: avoid; /* Try to keep card content on one page */
    background-color: #fff !important; /* Ensure card background is white for print */
  }
  .os-details-print-container .card-body,
  .os-details-print-container .card-header {
    padding: 0.75rem !important;
    background-color: #fff !important; /* White background for card sections */
  }

  .os-details-print-container h1,
  .os-details-print-container h4,
  .os-details-print-container p,
  .os-details-print-container dt,
  .os-details-print-container dd,
  .os-details-print-container span,
  .os-details-print-container div {
    color: #000 !important; /* Black text on white paper */
    background-color: transparent !important;
  }

  .os-details-print-container .text-muted,
  .os-details-print-container .card-subtitle {
      color: #333 !important;
  }
   .os-details-print-container .form-control-plaintext {
      border: none !important;
      padding-left: 0 !important;
      padding-right: 0 !important;
   }


  /* Urgent styling for print - make it less intrusive */
  .os-details-urgent.os-details-print-container .card {
     border-color: #666 !important; /* Darker border for urgent on print */
     background-color: #fff !important; /* Keep urgent card background white for print */
  }
  .os-details-urgent.os-details-print-container .card-header {
    background-color: #eee !important; /* Light grey header for urgent print */
    border-bottom: 1px solid #ccc !important;
  }
  .os-details-urgent.os-details-print-container .badge.bg-danger {
      background-color: #ddd !important; /* Grey badge for urgent print */
      color: #000 !important;
      border: 1px solid #999 !important;
  }
   .os-details-urgent.os-details-print-container .text-primary,
   .os-details-urgent.os-details-print-container .text-danger-emphasis {
       color: #000 !important; /* Black for emphasis text in urgent print */
   }
}


/* Dark Mode Adjustments */
[data-bs-theme="dark"] {
    /* Ensure background is dark */
    body {
      background-color: hsl(var(--background)) !important;
      color: hsl(var(--foreground)) !important;
    }

    /* Adjust card background and border in dark mode */
    .card {
        background-color: hsl(var(--card));
        border-color: hsl(var(--border)) !important;
    }

    /* Adjust card header/footer background */
     .card-header, .card-footer {
        background-color: hsl(var(--card) / 0.8); /* Slightly different shade for header/footer */
        border-color: hsl(var(--border)) !important;
    }

    /* Ensure text within cards is readable */
    .card-body, .card-title, .card-subtitle, .card-text {
       color: hsl(var(--card-foreground));
    }
    .text-muted {
        color: hsl(var(--muted-foreground)) !important;
    }
    .text-primary {
        color: hsl(var(--primary)) !important;
    }
    .text-primary-emphasis {
         color: hsl(var(--primary) / 0.9) !important; /* Adjust for emphasis */
    }
     .text-secondary-emphasis {
         color: hsl(var(--secondary) / 0.9) !important;
     }
    .text-success-emphasis {
         color: hsl(145 63% 49% / 0.9) !important; /* Example success color */
     }
     .text-info-emphasis {
         color: hsl(188 78% 41% / 0.9) !important; /* Example info color */
     }
     .text-warning-emphasis {
         color: hsl(45 100% 51% / 0.9) !important; /* Example warning color */
     }
     .text-danger-emphasis {
         color: hsl(0 72% 51% / 0.9) !important; /* Example danger color */
     }


    /* Adjust form controls for dark mode */
    .form-control, .form-select {
        background-color: hsl(var(--input));
        color: hsl(var(--foreground));
        border-color: hsl(var(--border));
    }
    .form-control::placeholder {
        color: hsl(var(--muted-foreground));
    }
     .form-control:focus, .form-select:focus {
        background-color: hsl(var(--input));
        color: hsl(var(--foreground));
        border-color: hsl(var(--ring)); /* Use ring color for focus border */
        box-shadow: 0 0 0 0.25rem hsla(var(--ring) / 0.25);
     }
     .form-control-plaintext {
        color: hsl(var(--foreground));
     }


    /* Adjust buttons for dark mode */
    .btn-outline-secondary {
        color: hsl(var(--secondary-foreground));
        border-color: hsl(var(--secondary));
    }
    .btn-outline-secondary:hover {
        color: hsl(var(--secondary-foreground));
        background-color: hsl(var(--secondary));
        border-color: hsl(var(--secondary));
    }
    .btn-light { /* Adjust light buttons */
        background-color: hsl(var(--muted));
        border-color: hsl(var(--muted));
        color: hsl(var(--muted-foreground));
    }
     .btn-light:hover {
        background-color: hsl(var(--muted) / 0.9);
        border-color: hsl(var(--muted) / 0.9);
        color: hsl(var(--muted-foreground));
     }


    /* Improve hover effect shadow in dark mode */
    .hover-lift:hover .card {
        box-shadow: 0 0.4rem 0.8rem rgba(0, 0, 0, 0.3) !important; /* Darker shadow */
    }

    /* Adjust background for subtle variations */
    .bg-light {
      background-color: hsl(var(--muted) / 0.5) !important; /* Override Bootstrap light */
    }
     .bg-light-subtle {
        background-color: hsl(var(--muted) / 0.3) !important;
     }
     .bg-body {
        background-color: hsl(var(--background)) !important; /* Ensure bg-body matches dark body */
     }


    /* Fix DayPicker styles for dark mode */
    .rdp {
        --rdp-cell-size: auto;
        --rdp-accent-color: hsl(var(--primary));
        --rdp-background-color: hsl(var(--primary) / 0.1);
        --rdp-accent-color-dark: hsl(var(--primary));
        --rdp-background-color-dark: hsl(var(--primary) / 0.2);
        --rdp-outline: 2px solid var(--rdp-accent-color);
        --rdp-outline-selected: 3px solid var(--rdp-accent-color);
        --rdp-selected-color: hsl(var(--primary-foreground));
        color: hsl(var(--foreground));
        background-color: transparent;
    }
     .rdp-table {
        border-color: hsl(var(--border)) !important;
     }
     .rdp-cell {
        border-color: hsl(var(--border)) !important;
     }

     .rdp-head_cell {
        color: hsl(var(--muted-foreground));
        border-color: hsl(var(--border)) !important;
     }

    /* Dark mode for DayContent elements */
    .rdp-day .bg-light-subtle {
        background-color: hsl(var(--muted) / 0.2) !important;
    }
     .rdp-day .text-dark {
        color: hsl(var(--foreground)) !important;
     }

    .rdp-button:hover:not([disabled]):not(.rdp-day_selected) {
      background-color: hsl(var(--accent) / 0.1);
    }
     .rdp-button:focus-visible:not([disabled]) {
         border: none;
         box-shadow: 0 0 0 2px var(--rdp-accent-color);
         z-index: 2;
     }
    .rdp-caption_label {
        color: hsl(var(--foreground));
    }
     .rdp-caption_dropdowns {
        background-color: hsl(var(--input));
     }
     .rdp-dropdown {
        background-color: hsl(var(--input));
        color: hsl(var(--foreground));
        border: 1px solid hsl(var(--border));
        border-radius: .25rem;
     }
      .rdp-dropdown:focus-visible {
         border-color: hsl(var(--ring));
         box-shadow: 0 0 0 0.25rem hsla(var(--ring) / 0.25);
         outline: none;
      }

    /* Dark mode for urgent OS details page */
    [data-bs-theme="dark"] .os-details-urgent .card {
        border-color: hsl(var(--destructive)) !important;
        background-color: hsla(var(--destructive) / 0.1) !important;
    }
    [data-bs-theme="dark"] .os-details-urgent .card-header {
        background-color: hsla(var(--destructive) / 0.15) !important;
        border-bottom-color: hsla(var(--destructive) / 0.3) !important;
        color: hsl(var(--destructive-foreground)) !important;
    }
    [data-bs-theme="dark"] .os-details-urgent .card-header .card-title,
    [data-bs-theme="dark"] .os-details-urgent .card-header .card-subtitle,
    [data-bs-theme="dark"] .os-details-urgent .text-primary {
        color: hsl(var(--destructive-foreground)) !important;
    }
    [data-bs-theme="dark"] .os-details-urgent .text-muted {
        color: hsl(var(--destructive-foreground) / 0.8) !important;
        opacity: 0.85;
    }
     [data-bs-theme="dark"] .os-details-urgent .form-control,
     [data-bs-theme="dark"] .os-details-urgent .form-select {
        border-color: hsl(var(--destructive));
        background-color: hsl(var(--input));
        color: hsl(var(--foreground));
    }
    [data-bs-theme="dark"] .os-details-urgent .form-control:focus,
    [data-bs-theme="dark"] .os-details-urgent .form-select:focus {
        border-color: hsl(var(--destructive));
        box-shadow: 0 0 0 0.25rem hsla(var(--destructive) / 0.35);
    }
}

/* Ensure Bootstrap --bs-primary-rgb is defined based on HSL for components that need it */
:root {
  /* Convert HSL(30, 100%, 55%) to RGB: approx 255, 145, 25 */
  --bs-primary-rgb: 255,145,25;
  /* Convert HSL(210, 100%, 50%) to RGB: approx 0, 123, 255 */
  --bs-secondary-rgb: 0,123,255;
}

[data-bs-theme="dark"] {
  /* Convert HSL(30, 100%, 55%) to RGB: approx 255, 145, 25 */
  --bs-primary-rgb: 255,145,25;
  /* Convert HSL(210, 100%, 60%) to RGB: approx 51, 149, 255 */
  --bs-secondary-rgb: 51,149,255;
}
